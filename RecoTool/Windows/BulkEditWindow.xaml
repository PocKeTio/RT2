<Window x:Class="RecoTool.Windows.BulkEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Bulk Edit" Height="260" Width="420" WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize" Background="#FAFAFA">
    <Border Margin="10" Padding="12" Background="White" BorderBrush="#DDDDDD" BorderThickness="1" CornerRadius="8">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Text="Apply changes to selected rows" FontWeight="Bold" FontSize="14" Margin="0,0,0,8"/>

            <StackPanel Grid.Row="1" Margin="0,4,0,8">
                <!-- Action -->
                <Grid Margin="0,4">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="26"/>
                        <ColumnDefinition Width="110"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <CheckBox Grid.Column="0" IsChecked="{Binding ApplyAction}" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="1" Text="Action:" VerticalAlignment="Center"/>
                    <ComboBox Grid.Column="2" ItemsSource="{Binding ActionOptions}"
                              DisplayMemberPath="Name" SelectedValuePath="Id"
                              SelectedValue="{Binding SelectedActionId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                              IsEnabled="{Binding ApplyAction}"/>
                </Grid>

                <!-- KPI -->
                <Grid Margin="0,4">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="26"/>
                        <ColumnDefinition Width="110"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <CheckBox Grid.Column="0" IsChecked="{Binding ApplyKpi}" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="1" Text="KPI:" VerticalAlignment="Center"/>
                    <ComboBox Grid.Column="2" ItemsSource="{Binding KpiOptions}"
                              DisplayMemberPath="Name" SelectedValuePath="Id"
                              SelectedValue="{Binding SelectedKpiId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                              IsEnabled="{Binding ApplyKpi}"/>
                </Grid>

                <!-- Incident Type -->
                <Grid Margin="0,4">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="26"/>
                        <ColumnDefinition Width="110"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <CheckBox Grid.Column="0" IsChecked="{Binding ApplyIncidentType}" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="1" Text="Incident Type:" VerticalAlignment="Center"/>
                    <ComboBox Grid.Column="2" ItemsSource="{Binding IncidentTypeOptions}"
                              DisplayMemberPath="Name" SelectedValuePath="Id"
                              SelectedValue="{Binding SelectedIncidentTypeId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                              IsEnabled="{Binding ApplyIncidentType}"/>
                </Grid>

                <TextBlock Margin="0,10,0,0" Foreground="#6B7280" FontSize="12" Text="Tip: Leave a box unchecked to keep that field unchanged."/>
            </StackPanel>

            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Width="90" Margin="0,6,6,0" Click="OkButton_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="#22A45D" CornerRadius="4" Padding="8,4" Cursor="Hand">
                                <TextBlock Text="Apply" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button Width="90" Margin="0,6,0,0" Click="CancelButton_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="#E5E7EB" CornerRadius="4" Padding="8,4" Cursor="Hand">
                                <TextBlock Text="Cancel" Foreground="#111827" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
</Window>
